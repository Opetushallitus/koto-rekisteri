import SQL from "sql-template-strings"
import { TestDB } from "./baseFixture"

export type Oid = `${number}.${number}.${number}.${number}.${number}.${number}`
export type Email = `${string}@${string}.${string}`

export interface KotoSuoritus {
  firstName: string
  lastName: string
  oppijanumero: Oid
  email: Email
  timeCompleted: string
  luetunYmmartaminenResultSystem: number
  luetunYmmartaminenResultTeacher: number
  kuullunYmmartaminenResultSystem: number
  kuullunYmmartaminenResultTeacher: number
  puheResultSystem: number
  puheResultTeacher: number
  kirjoittaminenResultSystem: number
  kirjoittaminenResultTeacher: number
  totalEvaluationTeacher: number
  totalEvaluationSystem: number
  courseId: number
  courseName: string
}

export const fixtureData = {
  ranja: {
    firstName: "Ranja Testi",
    lastName: "Öhman-Testi",
    oppijanumero: "1.2.246.562.24.33342764709",
    email: "devnull-1@oph.fi",
    timeCompleted: "2024-11-22 10:49:49",
    luetunYmmartaminenResultSystem: 34,
    luetunYmmartaminenResultTeacher: 33,
    kuullunYmmartaminenResultSystem: 34,
    kuullunYmmartaminenResultTeacher: 33,
    puheResultSystem: 0,
    puheResultTeacher: 75,
    kirjoittaminenResultSystem: 0,
    kirjoittaminenResultTeacher: 90,
    totalEvaluationTeacher: 62.33,
    totalEvaluationSystem: 37.78,
    courseId: 32,
    courseName: "Integraatio testaus",
  } as KotoSuoritus,
  fanni: {
    firstName: "Fanni Testi",
    lastName: "Vesala-Testi",
    oppijanumero: "1.2.246.562.24.33342764709",
    email: "devnull-3@oph.fi",
    timeCompleted: "2024-11-22 10:49:49",
    luetunYmmartaminenResultSystem: 34,
    luetunYmmartaminenResultTeacher: 33,
    kuullunYmmartaminenResultSystem: 43,
    kuullunYmmartaminenResultTeacher: 22,
    puheResultSystem: 0,
    puheResultTeacher: 75,
    kirjoittaminenResultSystem: 0,
    kirjoittaminenResultTeacher: 90,
    totalEvaluationTeacher: 59.58,
    totalEvaluationSystem: 42.78,
    courseId: 32,
    courseName: "Integraatio testaus",
  } as KotoSuoritus,
  eino: {
    firstName: "Eino Testi",
    lastName: "Välimaa-Testi",
    oppijanumero: "1.2.246.562.24.33342764709",
    email: "devnull-10@oph.fi",
    timeCompleted: "2024-11-22 10:49:49",
    luetunYmmartaminenResultSystem: 34,
    luetunYmmartaminenResultTeacher: 33,
    kuullunYmmartaminenResultSystem: 43,
    kuullunYmmartaminenResultTeacher: 33,
    puheResultSystem: 0,
    puheResultTeacher: 75,
    kirjoittaminenResultSystem: 0,
    kirjoittaminenResultTeacher: 90,
    totalEvaluationTeacher: 62.33,
    totalEvaluationSystem: 42.78,
    courseId: 32,
    courseName: "Integraatio testaus",
  } as KotoSuoritus,
  petro: {
    firstName: "Petro Testi",
    lastName: "Kivinen-Testi",
    oppijanumero: "1.2.246.562.24.33342764709",
    email: "devnull-2@oph.fi",
    timeCompleted: "2024-11-22 10:49:48",
    luetunYmmartaminenResultSystem: 20,
    luetunYmmartaminenResultTeacher: 40,
    kuullunYmmartaminenResultSystem: 20,
    kuullunYmmartaminenResultTeacher: 40,
    puheResultSystem: 0,
    puheResultTeacher: 75,
    kirjoittaminenResultSystem: 0,
    kirjoittaminenResultTeacher: 90,
    totalEvaluationTeacher: 65.83,
    totalEvaluationSystem: 22.22,
    courseId: 32,
    courseName: "Integraatio testaus",
  } as KotoSuoritus,
  pernilla: {
    firstName: "Pernilla Testi",
    lastName: "Pulkkinen-Testi",
    oppijanumero: "1.2.246.562.24.33342764709",
    email: "devnull-4@oph.fi",
    timeCompleted: "2024-11-22 10:49:48",
    luetunYmmartaminenResultSystem: 34,
    luetunYmmartaminenResultTeacher: 50,
    kuullunYmmartaminenResultSystem: 34,
    kuullunYmmartaminenResultTeacher: 40,
    puheResultSystem: 0,
    puheResultTeacher: 75,
    kirjoittaminenResultSystem: 0,
    kirjoittaminenResultTeacher: 90,
    totalEvaluationTeacher: 68.33,
    totalEvaluationSystem: 37.78,
    courseId: 32,
    courseName: "Integraatio testaus",
  } as KotoSuoritus,
  kalervo: {
    firstName: "Kalervo Testi",
    lastName: "Paasonen-Testi",
    oppijanumero: "1.2.246.562.24.33342764709",
    email: "devnull-5@oph.fi",
    timeCompleted: "2024-11-22 10:49:48",
    luetunYmmartaminenResultSystem: 24,
    luetunYmmartaminenResultTeacher: 50,
    kuullunYmmartaminenResultSystem: 34,
    kuullunYmmartaminenResultTeacher: 40,
    puheResultSystem: 0,
    puheResultTeacher: 75,
    kirjoittaminenResultSystem: 0,
    kirjoittaminenResultTeacher: 90,
    totalEvaluationTeacher: 68.33,
    totalEvaluationSystem: 32.22,
    courseId: 32,
    courseName: "Integraatio testaus",
  } as KotoSuoritus,
  toni: {
    firstName: "Toni Testi",
    lastName: "Laasonen-Testi",
    oppijanumero: "1.2.246.562.24.33342764709",
    email: "devnull-6@oph.fi",
    timeCompleted: "2024-11-22 10:49:48",
    luetunYmmartaminenResultSystem: 20,
    luetunYmmartaminenResultTeacher: 50,
    kuullunYmmartaminenResultSystem: 29,
    kuullunYmmartaminenResultTeacher: 40,
    puheResultSystem: 0,
    puheResultTeacher: 75,
    kirjoittaminenResultSystem: 0,
    kirjoittaminenResultTeacher: 90,
    totalEvaluationTeacher: 68.33,
    totalEvaluationSystem: 27.22,
    courseId: 32,
    courseName: "Integraatio testaus",
  } as KotoSuoritus,
  amalia: {
    firstName: "Amalia Testi",
    lastName: "Andersson-Testi",
    oppijanumero: "1.2.246.562.24.33342764709",
    email: "devnull-7@oph.fi",
    timeCompleted: "2024-11-22 10:49:48",
    luetunYmmartaminenResultSystem: 20,
    luetunYmmartaminenResultTeacher: 40,
    kuullunYmmartaminenResultSystem: 20,
    kuullunYmmartaminenResultTeacher: 40,
    puheResultSystem: 0,
    puheResultTeacher: 75,
    kirjoittaminenResultSystem: 0,
    kirjoittaminenResultTeacher: 90,
    totalEvaluationTeacher: 65.83,
    totalEvaluationSystem: 22.22,
    courseId: 32,
    courseName: "Integraatio testaus",
  } as KotoSuoritus,
  topi: {
    firstName: "Topi Testi",
    lastName: "Takkinen-Testi",
    oppijanumero: "1.2.246.562.24.33342764709",
    email: "devnull-8@oph.fi",
    timeCompleted: "2024-11-22 10:49:48",
    luetunYmmartaminenResultSystem: 34,
    luetunYmmartaminenResultTeacher: 22,
    kuullunYmmartaminenResultSystem: 34,
    kuullunYmmartaminenResultTeacher: 22,
    puheResultSystem: 0,
    puheResultTeacher: 75,
    kirjoittaminenResultSystem: 0,
    kirjoittaminenResultTeacher: 90,
    totalEvaluationTeacher: 56.83,
    totalEvaluationSystem: 37.78,
    courseId: 32,
    courseName: "Integraatio testaus",
  } as KotoSuoritus,
  tobias: {
    firstName: "Tobias Testi",
    lastName: "Saarela-Testi",
    oppijanumero: "1.2.246.562.24.33342764709",
    email: "devnull-9@oph.fi",
    timeCompleted: "2024-11-22 10:49:48",
    luetunYmmartaminenResultSystem: 34,
    luetunYmmartaminenResultTeacher: 50,
    kuullunYmmartaminenResultSystem: 34,
    kuullunYmmartaminenResultTeacher: 40,
    puheResultSystem: 0,
    puheResultTeacher: 75,
    kirjoittaminenResultSystem: 0,
    kirjoittaminenResultTeacher: 90,
    totalEvaluationTeacher: 68.33,
    totalEvaluationSystem: 37.78,
    courseId: 32,
    courseName: "Integraatio testaus",
  } as KotoSuoritus,
  silja: {
    firstName: "Silja Testi",
    lastName: "Haverinen-Testi",
    oppijanumero: "1.2.246.562.24.33342764709",
    email: "devnull-11@oph.fi",
    timeCompleted: "2024-11-22 10:49:48",
    luetunYmmartaminenResultSystem: 20,
    luetunYmmartaminenResultTeacher: 40,
    kuullunYmmartaminenResultSystem: 20,
    kuullunYmmartaminenResultTeacher: 40,
    puheResultSystem: 0,
    puheResultTeacher: 75,
    kirjoittaminenResultSystem: 0,
    kirjoittaminenResultTeacher: 90,
    totalEvaluationTeacher: 65.83,
    totalEvaluationSystem: 22.22,
    courseId: 32,
    courseName: "Integraatio testaus",
  } as KotoSuoritus,
  anniina: {
    firstName: "Anniina Testi",
    lastName: "Torvinen-Testi",
    oppijanumero: "1.2.246.562.24.33342764709",
    email: "devnull-12@oph.fi",
    timeCompleted: "2024-11-22 10:49:48",
    luetunYmmartaminenResultSystem: 34,
    luetunYmmartaminenResultTeacher: 22,
    kuullunYmmartaminenResultSystem: 43,
    kuullunYmmartaminenResultTeacher: 22,
    puheResultSystem: 0,
    puheResultTeacher: 75,
    kirjoittaminenResultSystem: 0,
    kirjoittaminenResultTeacher: 90,
    totalEvaluationTeacher: 56.83,
    totalEvaluationSystem: 42.78,
    courseId: 32,
    courseName: "Integraatio testaus",
  } as KotoSuoritus,
  magdalena: {
    firstName: "Magdalena Testi",
    lastName: "Sallinen-Testi",
    oppijanumero: "1.2.246.562.24.33342764709",
    email: "devnull-14@oph.fi",
    timeCompleted: "2024-11-22 10:49:48",
    luetunYmmartaminenResultSystem: 34,
    luetunYmmartaminenResultTeacher: 50,
    kuullunYmmartaminenResultSystem: 90,
    kuullunYmmartaminenResultTeacher: 50,
    puheResultSystem: 0,
    puheResultTeacher: 90,
    kirjoittaminenResultSystem: 0,
    kirjoittaminenResultTeacher: 75,
    totalEvaluationTeacher: 70.83,
    totalEvaluationSystem: 68.89,
    courseId: 32,
    courseName: "Integraatio testaus",
  } as KotoSuoritus,
} as const

const insertQuery = (suoritus: KotoSuoritus) => SQL`
    INSERT INTO koto_suoritus (first_name,
                               last_name,
                               oppijanumero,
                               email,
                               time_completed,
                               luetun_ymmartaminen_result_system,
                               luetun_ymmartaminen_result_teacher,
                               kuullun_ymmartaminen_result_system,
                               kuullun_ymmartaminen_result_teacher,
                               puhe_result_system,
                               puhe_result_teacher,
                               kirjoittaminen_result_system,
                               kirjottaminen_result_teacher,
                               total_evaluation_teacher,
                               total_evaluation_system,
                               courseid,
                               coursename)
    VALUES (${suoritus.firstName},
            ${suoritus.lastName},
            ${suoritus.oppijanumero},
            ${suoritus.email},
            ${suoritus.timeCompleted},
            ${suoritus.luetunYmmartaminenResultSystem},
            ${suoritus.luetunYmmartaminenResultTeacher},
            ${suoritus.kuullunYmmartaminenResultSystem},
            ${suoritus.kuullunYmmartaminenResultTeacher},
            ${suoritus.puheResultSystem},
            ${suoritus.puheResultTeacher},
            ${suoritus.kirjoittaminenResultSystem},
            ${suoritus.kirjoittaminenResultTeacher},
            ${suoritus.totalEvaluationTeacher},
            ${suoritus.totalEvaluationSystem},
            ${suoritus.courseId},
            ${suoritus.courseName})
`

export type KotoSuorittajaName = keyof typeof fixtureData

export const insert = async (db: TestDB, suoritus: KotoSuorittajaName) =>
  await db.dbClient.query(insertQuery(fixtureData[suoritus]))
